(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,n){e.exports=n(89)},51:function(e,t,n){},65:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),o=n.n(s),i=(n(51),n(2)),l=n.n(i),c=n(3),u=n(11),p=n(12),m=n(8),d=n(14),h=n(13),f=(n(30),n(1)),g=n.n(f),b=n(5),v=n.n(b),y=(n(37),n(63),n(65),n(17)),w=n(4),x=n(25),k=n.n(x),E=n(26),j="",S="",O="",_="",N="",I="",C={repository:[{value:"pos-standard-3",label:"POS Standard 3",repos:(j="magestore-product")+"/pos-standard",projectId:S=18096926,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-standard-4",label:"POS Standard 4",repos:j+"/pos-standard",projectId:S,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-3",label:"POS Pro 3",repos:j+"/pos-pro",projectId:O=18096980,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-4",label:"POS Pro 4",repos:j+"/pos-pro",projectId:O,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-3",label:"POS Enterprise 3",repos:j+"/pos-enterprise",projectId:_=18096977,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-4",label:"POS Enterprise 4",repos:j+"/pos-enterprise",projectId:_,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-commerce-4",label:"POS Pro Commerce 4",repos:j+"/pos-pro-commerce",projectId:N=18096981,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-commerce-4",label:"POS Enterprise Commerce 4",repos:j+"/pos-enterprise-commerce",projectId:I=18096978,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0}],repoUrl:[{value:"pos-standard",label:"POS Standard",repos:j+"/pos-standard",projectId:S},{value:"pos-pro",label:"POS Pro",repos:j+"/pos-pro",projectId:O},{value:"pos-enterprise",label:"POS Enterprise",repos:j+"/pos-enterprise",projectId:_},{value:"pos-pro-commerce",label:"POS Pro Commerce",repos:j+"/pos-pro-commerce",projectId:N},{value:"pos-enterprise-commerce",label:"POS Enterprise Commerce",repos:j+"/pos-enterprise-commerce",projectId:I}],key:"AIzaSyDwlPbk6GDEb52P9eLxOBGugc_EcDo0DW0"},D=n(6),T=n.n(D),F=function(){return new Headers({"PRIVATE-TOKEN":v.a.get("token"),"Content-Type":"application/json"})},L={getDataFromGoogleSheet:function(e,t){return fetch("https://sheets.googleapis.com/v4/spreadsheets/"+e+"/values/Plan!A1:C500?key="+t,{})},getListMileStoneClosed:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?sort=desc&state=closed&page=0&per_page=2000",{method:"get",headers:F()})},searchMileStoneByTitle:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?search="+t,{method:"get",headers:F()})},getListMileStoneOpened:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?sort=desc&state=active&page=0&per_page=2000",{method:"get",headers:F()})},getIssueListForAuto:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&state=opened&milestone=None&labels=Ready for Work",{method:"get",headers:F()})},getIssueList:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&state=opened",{method:"get",headers:F()})},createMilestone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones",{method:"post",headers:F(),body:JSON.stringify(t)})},updateIssueToMilestone:function(e,t,n){return fetch("https://gitlab.com/api/v4/projects/"+t+"/issues/"+e,{method:"PUT",headers:F(),body:JSON.stringify({milestone_id:n})})},createIssue:function(e,t,n,a){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues",{method:"post",headers:F(),body:JSON.stringify({title:t,labels:n,description:a})})},getIssueVerifiedFromMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&labels=Ready for Work&milestone="+t,{method:"get",headers:F()})},getIssueFromMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&milestone="+t,{method:"get",headers:F()})},closeMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones/"+t,{method:"PUT",headers:F(),body:JSON.stringify({state_event:"close"})})},release:function(e,t,n,a,r,s){return Object(c.a)(l.a.mark(function o(){var i,c,u,p,m,d,h,f,g,b,v,y,w,x;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i="",c="",u=fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/files/server%2Fapp%2Fcode%2FMagestore%2FWebpos%2Fetc%2Fconfig.xml/raw?ref="+n+"-develop",{method:"GET",headers:F()}),p=fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/files/CHANGELOG.md/raw?ref="+n+"-develop",{method:"GET",headers:F()}),o.next=6,Promise.all([u,p]);case 6:return m=o.sent,d=m[0],h=m[1],o.next=11,d.text();case 11:return f=o.sent,i=f.replace(/<version>\d+(\.\d+)+<\/version>/g,"<version>"+t.replace("v","")+"</version>"),o.next=15,h.text();case 15:return g=o.sent,c=r+"\n"+g,o.next=19,fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/commits",{method:"POST",headers:F(),body:JSON.stringify({branch:n+"-develop",commit_message:"Prepare to release "+a,actions:[{action:"update",file_path:"server/app/code/Magestore/Webpos/etc/config.xml",content:i},{action:"update",file_path:"CHANGELOG.md",content:c}]})});case 19:return b=o.sent,o.next=22,b.json();case 22:if(!o.sent.id){o.next=42;break}return o.next=26,fetch("https://gitlab.com/api/v4/projects/"+e+"/merge_requests",{method:"POST",headers:F(),body:JSON.stringify({source_branch:n+"-develop",target_branch:n,title:"Release "+a})});case 26:return v=o.sent,o.next=29,v.json();case 29:if(y=o.sent,!(w=y.iid)){o.next=42;break}return o.next=34,fetch("https://gitlab.com/api/v4/projects/"+e+"/merge_requests/"+w+"/merge",{method:"PUT",headers:F(),body:JSON.stringify({})});case 34:return x=o.sent,o.next=37,x.json();case 37:if(!o.sent.id){o.next=42;break}return o.next=41,fetch("https://gitlab.com/api/v4/projects/"+e+"/releases",{method:"POST",headers:F(),body:JSON.stringify({tag_name:t,ref:n,name:a,description:r.replace(t+"\n=============\n\n",""),milestones:s})});case 41:return o.abrupt("return",o.sent);case 42:case"end":return o.stop()}},o)}))()},getSlackUrl:function(){return Object(c.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 19714955,e.next=3,fetch("https://gitlab.com/api/v4/projects/19714955/repository/files/url.md/raw?ref=master",{method:"GET",headers:F()});case 3:return t=e.sent,e.next=6,t.text();case 6:window.slackUrl=e.sent;case 7:case"end":return e.stop()}},e)}))()},closeIssue:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues/"+t,{method:"PUT",headers:F(),body:JSON.stringify({state_event:"close"})})},getListMileStone:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones?page=0&per_page=2000&state=active",{method:"get",headers:F()})},checkLoginToken:function(e){return fetch("https://gitlab.com/api/v4/groups/7663926",{method:"get",headers:new Headers({"PRIVATE-TOKEN":e})})}},P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleValueChange=function(e){a.setState({value:e})},a.handleTabChange=function(e){a.setState({tab:e})},a.createIssue=Object(c.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g()(".loading").show(),!g()("#title").val()||!a.state.value){e.next=10;break}return t=[],(n=C.repoUrl).map(function(e,t){return e.message="",e}),a.repository.map(function(e){return g()("#"+e.value).length>0&&g()("#"+e.value).is(":checked")&&t.push(new Promise(function(t,r){L.createIssue(e.projectId,"["+e.release_branch+"] "+g()("#title").val(),[g()("#label_type").val()],a.state.value.replace("### Preconditions (*)","### Preconditions (*)\n"+e.label+"\n")).then(function(e){e.ok?e.json().then(function(e){n.map(function(t,a){return e.web_url.includes(t.value+"/")&&(n[a].message=n[a].message+"<a href='"+e.web_url+"'>"+e.title+"</a><br/>"),t}),t(e)},function(e){r(e.message)}):r("error")},function(e){r(e.message)})})),e}),e.next=8,Promise.all(t).then(function(e){e.map(function(e){return e}),g()(".loading").hide();var t="";n.map(function(e,n){return e.message&&(t=t+"<b>"+e.label+'</b> : <a href="https://gitlab.com/'+e.repos+'/issues">View All Issues</a><br/>'+e.message),e}),T.a.fire({title:"<strong>Success!</strong>",type:"success",html:t,showCloseButton:!0})});case 8:e.next=12;break;case 10:T.a.fire({type:"error",title:"Oops...",text:"Please fill all information!"}),g()(".loading").hide();case 12:case"end":return e.stop()}},e)})),a.selectAll=function(e){e.preventDefault(),g()(":checkbox").each(function(){this.checked=!0})},a.setBugTemplate=function(){a.setState({value:"### Preconditions (*)\n1. \n2. \n\n### Steps to reproduce (*)\n1. \n2. \n\n### Expected result (*)\n1. \n2. \n\n### Actual result (*)\n1. \n2. \n\n",tab:"write"}),g()("#label_type").val("Type: Bug report")},a.setFeatureTemplate=function(){a.setState({value:"### Description (*)\n\n### Expected behavior (*)\n\n### Benefits\n\n### Additional information\n\n",tab:"write"}),g()("#label_type").val("Type: Feature request")},a.setDeveloperIssueTemplate=function(){a.setState({value:"### Summary (*)\n\n### Examples (*)\n\n### Proposed solution\n\n",tab:"write"}),g()("#label_type").val("Type: Developer issue")},a.setCompatibleTemplate=function(){a.setState({value:"### Description (*)\n\n### Expected behavior (*)\n\n### Benefits\n\n### Additional information\n\n",tab:"write"}),g()("#label_type").val("Type: Compatible")},a.state={title:"",value:"### Preconditions (*)\n1. \n2. \n\n### Steps to reproduce (*)\n1. \n2. \n\n### Expected result (*)\n1. \n2. \n\n### Actual result (*)\n1. \n2. \n\n",tab:"write",labelType:["Type: Bug report","Type: Feature request","Type: Developer issue","Type: Compatible"]},a.converter=new E.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),a.repository=C.repository,a}return Object(p.a)(n,[{key:"render",value:function(){var e=this;if(v.a.get("authorize-github-base64")||v.a.get("token"))return a.createElement(a.Fragment,null,a.createElement("div",{className:"container"},a.createElement("div",{className:"form-group",id:"title_group"},a.createElement("label",{htmlFor:"title",className:"font-weight-bold"},"Title Issue"),a.createElement("input",{type:"text",className:"form-control",id:"title",name:"title"})),a.createElement("div",{className:"font-weight-bold"},"Content"),a.createElement("div",{id:"template_button","aria-label":"Basic example"},a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setBugTemplate},"Bug Template"),a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setFeatureTemplate},"Feature Template"),a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setDeveloperIssueTemplate},"Develop Issue Template"),a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setCompatibleTemplate},"Compatible Template")),a.createElement("br",null),a.createElement("div",{id:"container-body"},a.createElement(k.a,{onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.state.value,generateMarkdownPreview:function(t){return Promise.resolve(e.converter.makeHtml(t))},selectedTab:this.state.tab})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"label_type",className:"font-weight-bold"},"Issue Type"),a.createElement("select",{className:"form-control",name:"label_type",id:"label_type"},this.state.labelType.map(function(e,t){return a.createElement("option",{key:t,value:e},e)}))),a.createElement("a",{onClick:this.selectAll,href:"/"},"Select All"),a.createElement("div",{id:"repos-list"},this.repository.map(function(e,t){return a.createElement("div",{key:"form-check"+t,className:"form-check"},a.createElement("input",{className:"form-check-input",type:"checkbox",id:e.value,name:e.value,value:e.value}),a.createElement("label",{className:"form-check-label",htmlFor:e.value},e.label))})),a.createElement("div",{id:"button-list"},a.createElement("button",{className:"btn btn-primary",id:"create_issue_button",onClick:this.createIssue},"Create Issue"))))}}]),n}(a.Component),R=n(27),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).createMileStone=function(e,t,n){var r=Object(m.a)(a),s={due_date:a.state.dueDate,title:t,description:t};g()(".loading").show(),L.createMilestone(n,s).then(function(t){t.ok?t.json().then(function(t){L.getIssueList(n).then(function(n){n.ok?n.json().then(function(n){r.processArray(n,e,t)}):alert("Error ! Please try again !")})}):alert("Error ! Please try again !")})},a.updateIssueToMilestone=function(){var e=Object(c.a)(l.a.mark(function e(t,n,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes(t.title.replace(/\s+/g," ").trim())||!t.web_url.includes("issue")){e.next=3;break}return e.next=3,L.updateIssueToMilestone(t.iid,t.project_id,a.id);case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),a.processArray=function(){var e=Object(c.a)(l.a.mark(function e(t,n,a){var r,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=Object(R.a)(t);try{for(s.s();!(o=s.n()).done;)i=o.value,n.includes(i.title.replace(/\s+/g," ").trim())&&i.web_url.includes("issue")&&r.push(L.updateIssueToMilestone(i.iid,i.project_id,a.id))}catch(l){s.e(l)}finally{s.f()}return e.next=5,Promise.all(r);case 5:T.a.fire({title:"<strong>Success!</strong>",type:"success",html:"<b>"+a.title+": </b><a href='"+a.web_url+"'>"+a.web_url+"</a>",showCloseButton:!0}),g()(".loading").hide();case 7:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({suggestRelease:e.target.value})},a.handleChangeDue=function(e){var t=e.target.value;a.setState({dueDateDisplay:t});var n=t.split("/"),r=n[1]+"/"+n[0]+"/"+n[2],s=new Date(r);s.setHours(17),s.setMinutes(0),s.setSeconds(0),a.setState({dueDate:s.toISOString()})};var r=new Date,s=r.getDay(),o=new Date;s<=5?o.setDate(r.getDate()+(5-s)):o.setDate(r.getDate()+5+(s-5)),o.setHours(17),o.setMinutes(0),o.setSeconds(0);var i=String(o.getDate()).padStart(2,"0")+"/"+String(o.getMonth()+1).padStart(2,"0")+"/"+o.getFullYear();return a.state={lastestRelease:a.props.lastestRelease,dueDateDisplay:i,dueDate:o.toISOString(),suggestRelease:a.props.suggestRelease},a}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props;e.lastestRelease!==t.lastestRelease&&this.setState({lastestRelease:this.props.lastestRelease}),e.suggestRelease!==t.suggestRelease&&this.setState({suggestRelease:this.props.suggestRelease}),e.dueDateDisplay!==t.dueDateDisplay&&this.setState({dueDateDisplay:this.props.dueDateDisplay}),e.dueDate!==t.dueDate&&this.setState({dueDate:this.props.dueDate})}},{key:"render",value:function(){var e=this,t="";return this.props.hasFeatures&&(t=" - Has Features"),a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"container issue-repos"},a.createElement("label",{className:"row font-weight-bold"},this.props.reposLabel),a.createElement("label",{className:"row"},"Lastest Released: "+this.props.lastestRelease),a.createElement("div",{className:"row"},a.createElement("label",null,"Suggest Released"),t,a.createElement("input",{type:"text",className:"form-control",value:this.state.suggestRelease,onChange:this.handleChange})),a.createElement("div",{className:"row"},a.createElement("label",null,"Deadline"),t,a.createElement("input",{type:"text",className:"form-control",value:this.state.dueDateDisplay,onChange:this.handleChangeDue}))),this.props.issueList.map(function(e,t){return a.createElement("p",{key:t},e)}),a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.createMileStone(e.props.issueList,e.state.suggestRelease,e.props.projectId)}},"Create Milestone"))))}}]),n}(a.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).getInitialState=function(){return a.repository=C.repository,a.repoUrl=C.repoUrl,{mileStones:[],value:"",tab:"write",log:"",nextRelease:[]}},a.getList=function(){var e=Object(c.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=Object(m.a)(a),a.repoUrl.map(function(e){return n.push(L.getListMileStoneClosed(e)),e}),e.next=5,Promise.all(n);case 5:e.sent.map(function(e,n){return e.ok?e.json().then(function(e){e.map(function(e){return r.repository.map(function(n,a){return e.web_url.includes(n.repos+"/")&&e.title.includes("v"+n.release_branch)&&!t[a].lastestVersion&&(t[a].lastestVersion=e.title,t[a].suggestRelease=r.suggestRelease(e.title,"v"+n.release_branch,n.hasFeatures)),e}),e}),r.setState({nextRelease:t}),g()(".loading").hide()}):(T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),g()(".loading").hide()),e});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.suggestRelease=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.slice(e.indexOf(t),e.length).split(".");return n?(a[1]=parseInt(a[1])+1,a[2]=0):a[2]=parseInt(a[2])+1,e.slice(0,e.indexOf(t))+a.join(".")},a.readSprint=Object(c.a)(l.a.mark(function e(){var t,n,r,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState(a.getInitialState()),t=(t=g()("#plan_id").val()).slice(t.indexOf("d/"),t.length),n=C.key,(t=t.replace("d/","")).indexOf("/")>-1&&(t=t.slice(0,t.indexOf("/"))),r=Object(m.a)(a),g()(".loading").show(),!v.a.get("authorize-github-base64")&&!v.a.get("token")){e.next=22;break}return(s=a.repository).map(function(e,t){return e.issueList=[],e}),e.prev=11,e.next=14,L.getDataFromGoogleSheet(t,n);case 14:o=e.sent,i=null,o.ok?o.json().then(function(e){var t=0;e.values.map(function(e,n){return t<C.repository.length&&("undefined"!==typeof e[2]&&"release"!==e[2].toLowerCase()&&s[t].issueList.push(e[2].replace(/\s+/g," ").trim()),"undefined"!==typeof e[1]&&e[1].toLowerCase().includes("feature")&&(i||(i=n)),n===i+1&&e[2]&&(s[t].hasFeatures=1,i=null),"undefined"!==typeof e[2]&&"release"===e[2].toLowerCase()&&t++),e}),r.getList(s)}):(T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),g()(".loading").hide()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),alert(e.t0);case 22:case"end":return e.stop()}},e,null,[[11,19]])})),a.state=a.getInitialState(),a}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"container"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"plan_id",className:"font-weight-bold"},"Url c\u1ee7a file Planning (C\u1ea7n \u0111\u1ec3 public \u0111\u1ec3 c\xf3 th\u1ec3 \u0111\u1ecdc))"),a.createElement("input",{type:"text",className:"form-control",id:"plan_id",name:"plan_id"})),a.createElement("button",{className:"btn btn-primary",onClick:this.readSprint},"Read Sprint Planning"),a.createElement("div",{className:"form-group",id:"list-issue"},this.state.nextRelease.map(function(e,t){return a.createElement(M,{key:t,issueList:e.issueList,reposLabel:e.label,suggestRelease:e.suggestRelease,lastestRelease:e.lastestVersion,hasFeatures:e.hasFeatures,reposId:e.value,projectId:e.projectId})}))))}}]),n}(a.Component),B=n(35),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).getList=Object(c.a)(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Object(m.a)(a),g()(".loading").show(),r=[],a.repoUrl.map(function(e){return t.push(new Promise(function(t,n){L.getListMileStone(e.projectId).then(function(e){e.ok?e.json().then(function(e){r=[].concat(Object(B.a)(r),Object(B.a)(e)),t(e)},function(e){n(e.message)}):n("error")},function(e){n(e.message)})})),e}),e.next=7,Promise.all(t).then(function(){n.setState({mileStones:r}),g()(".loading").hide()});case 7:case"end":return e.stop()}},e)})),a.handleValueChange=function(e){a.setState({value:e})},a.handleTabChange=function(e){a.setState({tab:e})},a.generateReleaseNotes=function(){a.setState({value:""});var e=g()("#mile_stones").children("option:selected").val(),t=g()("#mile_stones").children("option:selected").html(),n="",r=[],s=[],o=[],i=[],l=Object(m.a)(a),c="";a.repository.map(function(a,r){return e.includes(a.repos)&&t.includes("v"+a.release_branch)&&(n=a.projectId,c=a.release_branch),a});var u=g()("#mile_stones").children("option:selected").html();u=u.slice(u.indexOf("v"+c),u.length),g()(".loading").show(),L.getIssueFromMileStone(n,t).then(function(e){if(e.ok){var t=l.state.value;t=t+u+"\n=============\n",e.json().then(function(e){e.map(function(e,t){var n=e.title,a=e.labels,l="bug";return a.map(function(e,t){return e.toLowerCase().includes("feature request")&&(l="feature"),e.toLowerCase().includes("developer issue")&&(l="develop"),e.toLowerCase().includes("compatible")&&(l="compatible"),e}),"feature"===l?s.push("[#"+e.iid+"]("+e.web_url+"): "+n):"develop"===l?o.push("[#"+e.iid+"]("+e.web_url+"): "+n):"compatible"===l?i.push("[#"+e.iid+"]("+e.web_url+"): "+n):r.push("[#"+e.iid+"]("+e.web_url+"): "+n),e}),s.length&&(t+="\n#### Feature Updated\n",s.map(function(e,n){return t=t+ ++n+". "+e+"\n",e})),i.length&&(t+="\n#### Compatible\n",i.map(function(e,n){return t=t+ ++n+". "+e+"\n",e})),r.length&&(t+="\n#### Bug Fixed\n",r.map(function(e,n){return t=t+ ++n+". "+e+"\n",e})),o.length&&(t+="\n#### Developer Issue\n",o.map(function(e,n){return t=t+ ++n+". "+e+"\n",e})),l.setState({value:t}),g()(".loading").hide()})}else T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),g()(".loading").hide()})},a.release=Object(c.a)(l.a.mark(function e(){var t,n,r,s,o,i,u,p,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.fire({title:"Are you sure?",text:"Do you really want to release?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Release!"});case 2:if(!e.sent.value){e.next=18;break}return g()(".loading").show(),t=g()("#mile_stones").children("option:selected").val(),n=g()("#mile_stones").children("option:selected").html(),r=g()("#mile_stones").children("option:selected").attr("milestoneId"),s=g()("#mile_stones").children("option:selected").html(),o="",i=Object(m.a)(a),u="",p="",a.repository.map(function(e,n){return t.includes(e.repos)&&s.includes("v"+e.release_branch)&&(o=e.projectId,u=e.release_branch,p=g()("#mile_stones").children("option:selected").html()),e}),e.next=16,L.getIssueFromMileStone(o,n);case 16:(d=e.sent).ok?d.json().then(function(){var e=Object(c.a)(l.a.mark(function e(t){var a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.closeIssueList(t);case 2:a=L.closeMileStone(o,r),p=p.slice(p.indexOf("v"+u),p.length),c=L.release(o,p,u,s,i.state.value,[n]),Promise.all([a,c]).then(function(e){var t=e[1];t.ok?t.json().then(function(e){if(T.a.fire({title:"<strong>Released!</strong>",type:"success",html:"<b>Release "+e.name+": </b><a href='"+e._links.self+"'>"+e._links.self+"</a>",showCloseButton:!0}),g()(".loading").hide(),window.slackUrl){var t="*Release : *<"+e._links.self+"|"+e.name+">";fetch(window.slackUrl,{method:"POST",body:JSON.stringify({text:t})})}}):(T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),g()(".loading").hide())});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()):(T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),g()(".loading").hide());case 18:case"end":return e.stop()}},e)})),a.closeIssueList=function(){var e=Object(c.a)(l.a.mark(function e(t){var n,a,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(R.a)(t);try{for(a.s();!(r=a.n()).done;)s=r.value,n.push(L.closeIssue(s.project_id,s.iid))}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",Promise.all(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={mileStones:[],value:"",tab:"write",log:""},L.getSlackUrl(),a.repository=C.repository,a.repoUrl=C.repoUrl,a.converter=new E.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){if(v.a.get("authorize-github-base64")||v.a.get("token"))try{this.getList()}catch(e){alert(e)}}},{key:"render",value:function(){var e=this;if(v.a.get("authorize-github-base64")||v.a.get("token"))return a.createElement(a.Fragment,null,a.createElement("div",{className:"container",id:"select_mile_stones"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"mile_stones",className:"font-weight-bold"},"Milestones"),a.createElement("select",{className:"form-control",name:"mile_stones",id:"mile_stones",onChange:this.generateReleaseNotes},a.createElement("option",{value:"0"},"--- Please Select MileStones ---"),this.state.mileStones.map(function(e,t){return a.createElement("option",{key:e.id,milestoneid:e.id,value:e.web_url},e.title)})))),a.createElement("div",{className:"container"},a.createElement(k.a,{onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.state.value,generateMarkdownPreview:function(t){return Promise.resolve(e.converter.makeHtml(t))},selectedTab:this.state.tab})),a.createElement("br",null),a.createElement("div",{className:"container"},a.createElement("button",{className:"btn btn-primary",onClick:this.release},"RELEASE"),a.createElement("br",null),a.createElement("br",null)))}}]),n}(a.Component),U=n(32),G=n.n(U),J=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).assignIssueToNextMileStone=Object(c.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(m.a)(a),g()(".loading").show(),a.repository.map(function(){var e=Object(c.a)(l.a.mark(function e(n,a){var r,s,o,i,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,g()("#"+n.value+"-repo-effort").val()&&(r=parseFloat(g()("#"+n.value+"-repo-effort").val())),s=parseFloat(g()("#time_total").val()),o=s*r/100,i=t.sortIssueInArray(n.issueList),[],e.next=8,t.getNextFourMileStone(n);case 8:if(!(c=e.sent)){e.next=11;break}return e.delegateYield(l.a.mark(function e(){var t,a,r,s,u,p,m,d,h,f,g,b,v,y,w,x,k,E,j,S,O;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],a=0;a<c.length;a++)t.push(c[a].title);return e.next=4,L.getListMileStoneOpened(n);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,u=[],s.map(function(e,t){e.title.includes("v"+n.release_branch)&&u.push(e.title)}),p=t.filter(function(e){return!u.includes(e)}).concat(u.filter(function(e){return!t.includes(e)})),m=l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=p[t],r="",c.map(function(e){e.title!==p[t]||r||(r=e.dueDate)}),e.next=5,L.createMilestone(n.projectId,{title:a,description:a,due_date:r});case 5:case"end":return e.stop()}},e)}),d=0;case 13:if(!(d<p.length)){e.next=18;break}return e.delegateYield(m(d),"t0",15);case 15:d++,e.next=13;break;case 18:h=0;case 19:if(!(h<t.length)){e.next=46;break}return f=t[h],e.next=23,L.getIssueVerifiedFromMileStone(n.projectId,f);case 23:return g=e.sent,e.next=26,g.json();case 26:return b=e.sent,e.next=29,L.searchMileStoneByTitle(n,f);case 29:return v=e.sent,e.next=32,v.json();case 32:for(y=e.sent,w=y[0].id,x=0,k=0;k<b.length;k++)E=b[k],j=E.time_stats.time_estimate/3600,x+=j;S=l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x+i[t].estimate<=o)){e.next=5;break}return x+=i[t].estimate,e.next=4,L.updateIssueToMilestone(i[t].iid,n.projectId,w);case 4:G.a.remove(i,function(e){return e.iid===i[t].iid});case 5:case"end":return e.stop()}},e)}),O=0;case 38:if(!(O<i.length)){e.next=43;break}return e.delegateYield(S(O),"t1",40);case 40:O++,e.next=38;break;case 43:h++,e.next=19;break;case 46:case"end":return e.stop()}},e)})(),"t0",11);case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),g()(".loading").hide();case 4:case"end":return e.stop()}},e)})),a.getNextFourMileStone=function(){var e=Object(c.a)(l.a.mark(function e(t){var n,r,s,o,i,c,u,p,m,d,h,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getListMileStoneClosed(t);case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,s="",r.map(function(e){e.title.includes("v"+t.release_branch)&&(s||(s=e))}),!s){e.next=21;break}return o=s.title,i=a.getNextVersion(o,t),c=a.getNextVersion(i,t),u=a.getNextVersion(c,t),p=a.getNextVersion(u,t),m=a.getDueDateSprint1(),d=a.getFridayNext(m),h=a.getFridayNext(d),f=a.getFridayNext(h),e.abrupt("return",[{title:i,dueDate:m},{title:c,dueDate:d},{title:u,dueDate:h},{title:p,dueDate:f}]);case 21:return e.abrupt("return",[]);case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.repository=C.repository,a.fetchIssue(),a}return Object(p.a)(n,[{key:"fetchIssue",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g()(".loading").show(),e.next=3,C.repoUrl.map(function(){var e=Object(c.a)(l.a.mark(function e(n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getIssueListForAuto(n.projectId);case 2:return a=e.sent,e.next=5,a.json();case 5:e.sent.map(function(e){var n=e.labels,a=e.time_stats.time_estimate/3600,r=9999,s=9999,o=new RegExp("S+[0-9]*"),i=new RegExp("P+[0-9]*");n.map(function(e){o.test(e)&&(r=parseFloat(e.replace("S",""),10)),i.test(e)&&(s=parseFloat(e.replace("P",""),10))}),t.repository.map(function(t,o){if("undefined"==typeof t.issueList&&(t.issueList=[]),t.projectId===e.project_id&&e.title.includes("["+t.release_branch+"]")){var i=t.issueList;i.push({id:e.id,iid:e.iid,title:e.title,estimate:a,severity:r,priority:s,labels:n,projectId:e.project_id}),t.issueList=i}return t})});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return g()(".loading").hide(),e.abrupt("return",this.repository);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sortIssueInArray",value:function(e){return G.a.sortBy(e,["severity","priority"])}},{key:"getNextVersion",value:function(e,t){var n=e.slice(e.indexOf(t.release_branch),e.length).split(".");return n[2]=parseFloat(n[2])+1,e.slice(0,e.indexOf(t.release_branch))+n.join(".")}},{key:"getDueDateSprint1",value:function(){var e=new Date,t=e.getDay(),n=new Date;return t<=5?n.setDate(e.getDate()+(5-t)):n.setDate(e.getDate()+5+(t-5)),n.setHours(17),n.setMinutes(0),n.setSeconds(0),n}},{key:"getFridayNext",value:function(e){var t=new Date;return t.setDate(e.getDate()+7),t.setHours(17),t.setMinutes(0),t.setSeconds(0),t}},{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"container"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"time_total",className:"font-weight-bold"},"Total Time For 1 Sprint"),a.createElement("input",{type:"text",className:"form-control",id:"time_total",name:"time_total"})),this.repository.map(function(e,t){return a.createElement("div",{key:"form-check"+t,className:"form-group repo-effort"},a.createElement("label",{htmlFor:e.value+"-repo-effort",className:"font-weight-bold"},e.label," (Effort %)"),a.createElement("input",{type:"text",className:"form-control",id:e.value+"-repo-effort",name:"time_total"}))}),a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary",onClick:this.assignIssueToNextMileStone},"Assign Issue To Milestone For 1 month"))))}}]),n}(a.Component),H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).login=function(){var e=Object(c.a)(l.a.mark(function e(t){var n,r,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(m.a)(a),r=g()(".loading"),s=g()("#token"),t.preventDefault(),!s.val()){e.next=20;break}return o=s.val(),r.show(),e.prev=7,e.next=10,L.checkLoginToken(o);case 10:e.sent.ok?(v.a.set("token",o),n.setState({login:!0})):T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),T.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"});case 17:r.hide(),e.next=21;break;case 20:T.a.fire({type:"error",title:"Oops...",text:"Please re-fill information!"});case 21:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t){return e.apply(this,arguments)}}(),a.logout=function(){var e=Object(c.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Object(m.a)(a),e.prev=2,e.next=5,T.a.fire({title:"Are you sure?",text:"Do you really want to logout",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Log out!"});case 5:e.sent.value&&(v.a.remove("authorize-github-base64"),v.a.remove("token"),n.setState({login:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),v.a.get("authorize-github-base64")||v.a.get("token")?a.state={login:!0}:a.state={login:!1},a}return Object(p.a)(n,[{key:"render",value:function(){return this.state.login?a.createElement(y.a,null,a.createElement("div",{className:"loading"},"Loading\u2026"),a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-light"},a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},a.createElement("div",{className:"navbar-nav"},a.createElement(y.b,{className:"nav-item nav-link",to:"/issue"},"Create Issue"),a.createElement(y.b,{className:"nav-item nav-link",to:"/milestone/"},"Create Milestone"),a.createElement(y.b,{className:"nav-item nav-link",to:"/autoMilestone/"},"Auto Create Milestone"),a.createElement(y.b,{className:"nav-item nav-link",to:"/release/"},"Create Release"),a.createElement(y.b,{className:"nav-item nav-link",to:"#",onClick:this.logout},"Logout")))),a.createElement("div",{className:"container container-fluid"},a.createElement("aside",{className:"col-sm-12"},a.createElement(w.a,{exact:!0,path:"/",component:P}),a.createElement(w.a,{exact:!0,path:"/issue",component:P}),a.createElement(w.a,{exact:!0,path:"/milestone/",component:A}),a.createElement(w.a,{exact:!0,path:"/release/",component:V}),a.createElement(w.a,{exact:!0,path:"/autoMilestone/",component:J})))):a.createElement(y.a,null,a.createElement("div",{className:"loading"},"Loading\u2026"),a.createElement("div",{className:"container container-fluid"},a.createElement("aside",{className:"col-sm-8",id:"form_wrapper"},a.createElement("div",{className:"card"},a.createElement("article",{className:"card-body"},a.createElement("h4",{className:"card-title text-center mb-4 mt-1"},"Sign in"),a.createElement("hr",null),a.createElement("form",{id:"login_form"},a.createElement("div",{className:"form-group"},a.createElement("div",{className:"input-group"},a.createElement("input",{id:"token",name:"token",className:"form-control",placeholder:"GitLab Token",type:"text"}))),a.createElement("div",{className:"form-group"},a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:this.login}," Login"))))))))}}]),n}(a.Component),z=document.getElementById("root");o.a.render(a.createElement(H,null),z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.e4b5c3cf.chunk.js.map