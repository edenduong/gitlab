(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(89)},51:function(e,t,a){},65:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),i=(a(51),a(2)),l=a.n(i),c=a(3),u=a(11),p=a(12),m=a(8),d=a(14),h=a(13),g=(a(30),a(1)),f=a.n(g),b=a(5),v=a.n(b),y=(a(37),a(63),a(65),a(18)),w=a(4),k=a(25),E=a.n(k),j=a(26),S="",x="",O="",_="",N="",C="",I={repository:[{value:"pos-standard-3",label:"POS Standard 3",repos:(S="magestore-product")+"/pos-standard",projectId:x=18096926,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-standard-4",label:"POS Standard 4",repos:S+"/pos-standard",projectId:x,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-3",label:"POS Pro 3",repos:S+"/pos-pro",projectId:O=18096980,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-4",label:"POS Pro 4",repos:S+"/pos-pro",projectId:O,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-3",label:"POS Enterprise 3",repos:S+"/pos-enterprise",projectId:_=18096977,release_branch:"3",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-4",label:"POS Enterprise 4",repos:S+"/pos-enterprise",projectId:_,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-5",label:"POS Enterprise 5",repos:S+"/pos-enterprise",projectId:_,release_branch:"5",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-pro-commerce-4",label:"POS Pro Commerce 4",repos:S+"/pos-pro-commerce",projectId:N=18096981,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0},{value:"pos-enterprise-commerce-4",label:"POS Enterprise Commerce 4",repos:S+"/pos-enterprise-commerce",projectId:C=18096978,release_branch:"4",issueList:[],lastestVersion:"",suggestRelease:"",hasFeatures:0}],repoUrl:[{value:"pos-standard",label:"POS Standard",repos:S+"/pos-standard",projectId:x},{value:"pos-pro",label:"POS Pro",repos:S+"/pos-pro",projectId:O},{value:"pos-enterprise",label:"POS Enterprise",repos:S+"/pos-enterprise",projectId:_},{value:"pos-pro-commerce",label:"POS Pro Commerce",repos:S+"/pos-pro-commerce",projectId:N},{value:"pos-enterprise-commerce",label:"POS Enterprise Commerce",repos:S+"/pos-enterprise-commerce",projectId:C}],key:"AIzaSyDwlPbk6GDEb52P9eLxOBGugc_EcDo0DW0"},T=a(6),P=a.n(T),R=function(){return new Headers({"PRIVATE-TOKEN":v.a.get("token"),"Content-Type":"application/json"})},D={getDataFromGoogleSheet:function(e,t){return fetch("https://sheets.googleapis.com/v4/spreadsheets/"+e+"/values/Plan!A1:C500?key="+t,{})},getListMileStoneClosed:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?sort=desc&state=closed&page=0&per_page=2000",{method:"get",headers:R()})},searchMileStoneByTitle:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?search="+t,{method:"get",headers:R()})},getListMileStoneOpened:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e.projectId+"/milestones?sort=desc&state=active&page=0&per_page=2000",{method:"get",headers:R()})},getIssueListForAuto:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&state=opened&milestone=None&labels=Ready for Work",{method:"get",headers:R()})},getIssueList:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&state=opened",{method:"get",headers:R()})},createMilestone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones",{method:"post",headers:R(),body:JSON.stringify(t)})},updateIssueToMilestone:function(e,t,a){return fetch("https://gitlab.com/api/v4/projects/"+t+"/issues/"+e,{method:"PUT",headers:R(),body:JSON.stringify({milestone_id:a})})},createIssue:function(e,t,a,n){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues",{method:"post",headers:R(),body:JSON.stringify({title:t,labels:a,description:n})})},getIssueVerifiedFromMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&labels=Ready for Work&milestone="+t,{method:"get",headers:R()})},getIssueFromMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues?page=0&per_page=2000&milestone="+t,{method:"get",headers:R()})},closeMileStone:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones/"+t,{method:"PUT",headers:R(),body:JSON.stringify({state_event:"close"})})},release:function(e,t,a,n,r,s){var o=this;return Object(c.a)(l.a.mark(function i(){var c,u,p,m,d,h,g,f,b,v,y,w,k,E,j,S,x,O;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return window.retryRequest=0,c="",u="",p="",m=fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/files/server%2Fapp%2Fcode%2FMagestore%2FWebpos%2Fetc%2Fconfig.xml/raw?ref="+a+"-develop",{method:"GET",headers:R()}),d=fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/files/CHANGELOG.md/raw?ref="+a+"-develop",{method:"GET",headers:R()}),h=fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/files/server%2Fapp%2Fcode%2FMagestore%2F_metapackage%2Fcomposer.json/raw?ref="+a+"-develop",{method:"GET",headers:R()}),i.next=9,Promise.all([m,d,h]);case 9:return g=i.sent,f=g[0],b=g[1],v=g[2],i.next=15,f.text();case 15:return y=i.sent,c=y.replace(/<version>\d+(\.\d+)+<\/version>/g,"<version>"+t.replace("v","")+"</version>"),i.next=19,b.text();case 19:return w=i.sent,u=r+"\n"+w,i.next=23,v.text();case 23:return k=i.sent,p=k.replace(/\"version\": \"\d+(\.\d+)+\"/g,'"version": "'+t.replace("v","")+'"'),E=[],p&&E.push({action:"update",file_path:"server/app/code/Magestore/_metapackage/composer.json",content:p}),c&&E.push({action:"update",file_path:"server/app/code/Magestore/Webpos/etc/config.xml",content:c}),u&&E.push({action:"update",file_path:"CHANGELOG.md",content:u}),i.next=31,fetch("https://gitlab.com/api/v4/projects/"+e+"/repository/commits",{method:"POST",headers:R(),body:JSON.stringify({branch:a+"-develop",commit_message:"Prepare to release "+n,actions:E})});case 31:return j=i.sent,i.next=34,j.json();case 34:if(!i.sent.id){i.next=47;break}return i.next=38,fetch("https://gitlab.com/api/v4/projects/"+e+"/merge_requests",{method:"POST",headers:R(),body:JSON.stringify({source_branch:a+"-develop",target_branch:a,title:"Release "+n})});case 38:return S=i.sent,i.next=41,S.json();case 41:if(x=i.sent,!(O=x.iid)){i.next=47;break}return i.next=46,o.acceptAndRelease(O,e,t,a,n,r,s);case 46:return i.abrupt("return",i.sent);case 47:case"end":return i.stop()}},i)}))()},acceptAndRelease:function(e,t,a,n,r,s,o){var i=this;return Object(c.a)(l.a.mark(function c(){var u,p;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return window.retryRequest?window.retryRequest++:window.retryRequest=1,l.next=3,fetch("https://gitlab.com/api/v4/projects/"+t+"/merge_requests/"+e+"/merge",{method:"PUT",headers:R(),body:JSON.stringify({})});case 3:if(!(u=l.sent)||!u.ok){l.next=14;break}return l.next=7,u.json();case 7:if(!(p=l.sent)||!p.id){l.next=12;break}return l.next=11,fetch("https://gitlab.com/api/v4/projects/"+t+"/releases",{method:"POST",headers:R(),body:JSON.stringify({tag_name:a,ref:n,name:r,description:s.replace(a+"\n=============\n\n",""),milestones:o})});case 11:return l.abrupt("return",l.sent);case 12:l.next=18;break;case 14:if(!(window.retryRequest<2e3)){l.next=18;break}return l.next=17,i.acceptAndRelease(e,t,a,n,r,s,o);case 17:return l.abrupt("return",l.sent);case 18:case"end":return l.stop()}},c)}))()},getSlackUrl:function(){return Object(c.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 19714955,e.next=3,fetch("https://gitlab.com/api/v4/projects/19714955/repository/files/url.md/raw?ref=master",{method:"GET",headers:R()});case 3:return t=e.sent,e.next=6,t.text();case 6:window.slackUrl=e.sent;case 7:case"end":return e.stop()}},e)}))()},closeIssue:function(e,t){return fetch("https://gitlab.com/api/v4/projects/"+e+"/issues/"+t,{method:"PUT",headers:R(),body:JSON.stringify({state_event:"close"})})},getListMileStone:function(e){return fetch("https://gitlab.com/api/v4/projects/"+e+"/milestones?page=0&per_page=2000&state=active",{method:"get",headers:R()})},checkLoginToken:function(e){return fetch("https://gitlab.com/api/v4/groups/7663926",{method:"get",headers:new Headers({"PRIVATE-TOKEN":e})})}},L=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleValueChange=function(e){n.setState({value:e})},n.handleTabChange=function(e){n.setState({tab:e})},n.createIssue=Object(c.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f()(".loading").show(),!f()("#title").val()||!n.state.value){e.next=10;break}return t=[],(a=I.repoUrl).map(function(e,t){return e.message="",e}),n.repository.map(function(e){return f()("#"+e.value).length>0&&f()("#"+e.value).is(":checked")&&t.push(new Promise(function(t,r){D.createIssue(e.projectId,"["+e.release_branch+"] "+f()("#title").val(),[f()("#label_type").val()],n.state.value.replace("### Preconditions (*)","### Preconditions (*)\n"+e.label+"\n")).then(function(e){e.ok?e.json().then(function(e){a.map(function(t,n){return e.web_url.includes(t.value+"/")&&(a[n].message=a[n].message+"<a href='"+e.web_url+"'>"+e.title+"</a><br/>"),t}),t(e)},function(e){r(e.message)}):r("error")},function(e){r(e.message)})})),e}),e.next=8,Promise.all(t).then(function(e){e.map(function(e){return e}),f()(".loading").hide();var t="";a.map(function(e,a){return e.message&&(t=t+"<b>"+e.label+'</b> : <a href="https://gitlab.com/'+e.repos+'/issues">View All Issues</a><br/>'+e.message),e}),P.a.fire({title:"<strong>Success!</strong>",type:"success",html:t,showCloseButton:!0})});case 8:e.next=12;break;case 10:P.a.fire({type:"error",title:"Oops...",text:"Please fill all information!"}),f()(".loading").hide();case 12:case"end":return e.stop()}},e)})),n.selectAll=function(e){e.preventDefault(),f()(":checkbox").each(function(){this.checked=!0})},n.setBugTemplate=function(){n.setState({value:"### Preconditions (*)\n1. \n2. \n\n### Steps to reproduce (*)\n1. \n2. \n\n### Expected result (*)\n1. \n2. \n\n### Actual result (*)\n1. \n2. \n\n",tab:"write"}),f()("#label_type").val("Type: Bug report")},n.setFeatureTemplate=function(){n.setState({value:"### Description (*)\n\n### Expected behavior (*)\n\n### Benefits\n\n### Additional information\n\n",tab:"write"}),f()("#label_type").val("Type: Feature request")},n.setDeveloperIssueTemplate=function(){n.setState({value:"### Summary (*)\n\n### Examples (*)\n\n### Proposed solution\n\n",tab:"write"}),f()("#label_type").val("Type: Developer issue")},n.setCompatibleTemplate=function(){n.setState({value:"### Description (*)\n\n### Expected behavior (*)\n\n### Benefits\n\n### Additional information\n\n",tab:"write"}),f()("#label_type").val("Type: Compatible")},n.state={title:"",value:"### Preconditions (*)\n1. \n2. \n\n### Steps to reproduce (*)\n1. \n2. \n\n### Expected result (*)\n1. \n2. \n\n### Actual result (*)\n1. \n2. \n\n",tab:"write",labelType:["Type: Bug report","Type: Feature request","Type: Developer issue","Type: Compatible"]},n.converter=new j.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),n.repository=I.repository,n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;if(v.a.get("authorize-github-base64")||v.a.get("token"))return n.createElement(n.Fragment,null,n.createElement("div",{className:"container"},n.createElement("div",{className:"form-group",id:"title_group"},n.createElement("label",{htmlFor:"title",className:"font-weight-bold"},"Title Issue"),n.createElement("input",{type:"text",className:"form-control",id:"title",name:"title"})),n.createElement("div",{className:"font-weight-bold"},"Content"),n.createElement("div",{id:"template_button","aria-label":"Basic example"},n.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setBugTemplate},"Bug Template"),n.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setFeatureTemplate},"Feature Template"),n.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setDeveloperIssueTemplate},"Develop Issue Template"),n.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.setCompatibleTemplate},"Compatible Template")),n.createElement("br",null),n.createElement("div",{id:"container-body"},n.createElement(E.a,{onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.state.value,generateMarkdownPreview:function(t){return Promise.resolve(e.converter.makeHtml(t))},selectedTab:this.state.tab})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"label_type",className:"font-weight-bold"},"Issue Type"),n.createElement("select",{className:"form-control",name:"label_type",id:"label_type"},this.state.labelType.map(function(e,t){return n.createElement("option",{key:t,value:e},e)}))),n.createElement("a",{onClick:this.selectAll,href:"/"},"Select All"),n.createElement("div",{id:"repos-list"},this.repository.map(function(e,t){return n.createElement("div",{key:"form-check"+t,className:"form-check"},n.createElement("input",{className:"form-check-input",type:"checkbox",id:e.value,name:e.value,value:e.value}),n.createElement("label",{className:"form-check-label",htmlFor:e.value},e.label))})),n.createElement("div",{id:"button-list"},n.createElement("button",{className:"btn btn-primary",id:"create_issue_button",onClick:this.createIssue},"Create Issue"))))}}]),a}(n.Component),F=a(27),M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).createMileStone=function(e,t,a){var r=Object(m.a)(n),s={due_date:n.state.dueDate,title:t,description:t};f()(".loading").show(),D.createMilestone(a,s).then(function(t){t.ok?t.json().then(function(t){D.getIssueList(a).then(function(a){a.ok?a.json().then(function(a){r.processArray(a,e,t)}):alert("Error ! Please try again !")})}):alert("Error ! Please try again !")})},n.updateIssueToMilestone=function(){var e=Object(c.a)(l.a.mark(function e(t,a,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes(t.title.replace(/\s+/g," ").trim())||!t.web_url.includes("issue")){e.next=3;break}return e.next=3,D.updateIssueToMilestone(t.iid,t.project_id,n.id);case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),n.processArray=function(){var e=Object(c.a)(l.a.mark(function e(t,a,n){var r,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=Object(F.a)(t);try{for(s.s();!(o=s.n()).done;)i=o.value,a.includes(i.title.replace(/\s+/g," ").trim())&&i.web_url.includes("issue")&&r.push(D.updateIssueToMilestone(i.iid,i.project_id,n.id))}catch(l){s.e(l)}finally{s.f()}return e.next=5,Promise.all(r);case 5:P.a.fire({title:"<strong>Success!</strong>",type:"success",html:"<b>"+n.title+": </b><a href='"+n.web_url+"'>"+n.web_url+"</a>",showCloseButton:!0}),f()(".loading").hide();case 7:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState({suggestRelease:e.target.value})},n.handleChangeDue=function(e){var t=e.target.value;n.setState({dueDateDisplay:t});var a=t.split("/"),r=a[1]+"/"+a[0]+"/"+a[2],s=new Date(r);s.setHours(17),s.setMinutes(0),s.setSeconds(0),n.setState({dueDate:s.toISOString()})};var r=new Date,s=r.getDay(),o=new Date;s<=5?o.setDate(r.getDate()+(5-s)):o.setDate(r.getDate()+5+(s-5)),o.setHours(17),o.setMinutes(0),o.setSeconds(0);var i=String(o.getDate()).padStart(2,"0")+"/"+String(o.getMonth()+1).padStart(2,"0")+"/"+o.getFullYear();return n.state={lastestRelease:n.props.lastestRelease,dueDateDisplay:i,dueDate:o.toISOString(),suggestRelease:n.props.suggestRelease},n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props;e.lastestRelease!==t.lastestRelease&&this.setState({lastestRelease:this.props.lastestRelease}),e.suggestRelease!==t.suggestRelease&&this.setState({suggestRelease:this.props.suggestRelease}),e.dueDateDisplay!==t.dueDateDisplay&&this.setState({dueDateDisplay:this.props.dueDateDisplay}),e.dueDate!==t.dueDate&&this.setState({dueDate:this.props.dueDate})}},{key:"render",value:function(){var e=this,t="";return this.props.hasFeatures&&(t=" - Has Features"),n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("div",{className:"container issue-repos"},n.createElement("label",{className:"row font-weight-bold"},this.props.reposLabel),n.createElement("label",{className:"row"},"Lastest Released: "+this.props.lastestRelease),n.createElement("div",{className:"row"},n.createElement("label",null,"Suggest Released"),t,n.createElement("input",{type:"text",className:"form-control",value:this.state.suggestRelease,onChange:this.handleChange})),n.createElement("div",{className:"row"},n.createElement("label",null,"Deadline"),t,n.createElement("input",{type:"text",className:"form-control",value:this.state.dueDateDisplay,onChange:this.handleChangeDue}))),this.props.issueList.map(function(e,t){return n.createElement("p",{key:t},e)}),n.createElement("div",{className:"form-group"},n.createElement("button",{className:"btn btn-primary",onClick:function(){return e.createMileStone(e.props.issueList,e.state.suggestRelease,e.props.projectId)}},"Create Milestone"))))}}]),a}(n.Component),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getInitialState=function(){return n.repository=I.repository,n.repoUrl=I.repoUrl,{mileStones:[],value:"",tab:"write",log:"",nextRelease:[]}},n.getList=function(){var e=Object(c.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=Object(m.a)(n),n.repoUrl.map(function(e){return a.push(D.getListMileStoneClosed(e)),e}),e.next=5,Promise.all(a);case 5:e.sent.map(function(e,a){return e.ok?e.json().then(function(e){e.map(function(e){return r.repository.map(function(a,n){return e.web_url.includes(a.repos+"/")&&e.title.includes("v"+a.release_branch)&&!t[n].lastestVersion&&(t[n].lastestVersion=e.title,t[n].suggestRelease=r.suggestRelease(e.title,"v"+a.release_branch,a.hasFeatures)),e}),e}),r.setState({nextRelease:t}),f()(".loading").hide()}):(P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),f()(".loading").hide()),e});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.suggestRelease=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.slice(e.indexOf(t),e.length).split(".");return a?(n[1]=parseInt(n[1])+1,n[2]=0):n[2]=parseInt(n[2])+1,e.slice(0,e.indexOf(t))+n.join(".")},n.readSprint=Object(c.a)(l.a.mark(function e(){var t,a,r,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState(n.getInitialState()),t=(t=f()("#plan_id").val()).slice(t.indexOf("d/"),t.length),a=I.key,(t=t.replace("d/","")).indexOf("/")>-1&&(t=t.slice(0,t.indexOf("/"))),r=Object(m.a)(n),f()(".loading").show(),!v.a.get("authorize-github-base64")&&!v.a.get("token")){e.next=22;break}return(s=n.repository).map(function(e,t){return e.issueList=[],e}),e.prev=11,e.next=14,D.getDataFromGoogleSheet(t,a);case 14:o=e.sent,i=null,o.ok?o.json().then(function(e){var t=0;e.values.map(function(e,a){return t<I.repository.length&&("undefined"!==typeof e[2]&&"release"!==e[2].toLowerCase()&&s[t].issueList.push(e[2].replace(/\s+/g," ").trim()),"undefined"!==typeof e[1]&&e[1].toLowerCase().includes("feature")&&(i||(i=a)),a===i+1&&e[2]&&(s[t].hasFeatures=1,i=null),"undefined"!==typeof e[2]&&"release"===e[2].toLowerCase()&&t++),e}),r.getList(s)}):(P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),f()(".loading").hide()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),alert(e.t0);case 22:case"end":return e.stop()}},e,null,[[11,19]])})),n.state=n.getInitialState(),n}return Object(p.a)(a,[{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"container"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"plan_id",className:"font-weight-bold"},"Url c\u1ee7a file Planning (C\u1ea7n \u0111\u1ec3 public \u0111\u1ec3 c\xf3 th\u1ec3 \u0111\u1ecdc))"),n.createElement("input",{type:"text",className:"form-control",id:"plan_id",name:"plan_id"})),n.createElement("button",{className:"btn btn-primary",onClick:this.readSprint},"Read Sprint Planning"),n.createElement("div",{className:"form-group",id:"list-issue"},this.state.nextRelease.map(function(e,t){return n.createElement(M,{key:t,issueList:e.issueList,reposLabel:e.label,suggestRelease:e.suggestRelease,lastestRelease:e.lastestVersion,hasFeatures:e.hasFeatures,reposId:e.value,projectId:e.projectId})}))))}}]),a}(n.Component),B=a(35),U=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getList=Object(c.a)(l.a.mark(function e(){var t,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=Object(m.a)(n),f()(".loading").show(),r=[],n.repoUrl.map(function(e){return t.push(new Promise(function(t,a){D.getListMileStone(e.projectId).then(function(e){e.ok?e.json().then(function(e){r=[].concat(Object(B.a)(r),Object(B.a)(e)),t(e)},function(e){a(e.message)}):a("error")},function(e){a(e.message)})})),e}),e.next=7,Promise.all(t).then(function(){a.setState({mileStones:r}),f()(".loading").hide()});case 7:case"end":return e.stop()}},e)})),n.handleValueChange=function(e){n.setState({value:e})},n.handleTabChange=function(e){n.setState({tab:e})},n.generateReleaseNotes=function(){n.setState({value:""});var e=f()("#mile_stones").children("option:selected").val(),t=f()("#mile_stones").children("option:selected").html(),a="",r=[],s=[],o=[],i=[],l=Object(m.a)(n),c="";n.repository.map(function(n,r){return e.includes(n.repos)&&t.includes("v"+n.release_branch)&&(a=n.projectId,c=n.release_branch),n});var u=f()("#mile_stones").children("option:selected").html();u=u.slice(u.indexOf("v"+c),u.length),f()(".loading").show(),D.getIssueFromMileStone(a,t).then(function(e){if(e.ok){var t=l.state.value;t=t+u+"\n=============\n",e.json().then(function(e){e.map(function(e,t){var a=e.title,n=e.labels,l="bug";return n.map(function(e,t){return e.toLowerCase().includes("feature request")&&(l="feature"),e.toLowerCase().includes("developer issue")&&(l="develop"),e.toLowerCase().includes("compatible")&&(l="compatible"),e}),"feature"===l?s.push("[#"+e.iid+"]("+e.web_url+"): "+a):"develop"===l?o.push("[#"+e.iid+"]("+e.web_url+"): "+a):"compatible"===l?i.push("[#"+e.iid+"]("+e.web_url+"): "+a):r.push("[#"+e.iid+"]("+e.web_url+"): "+a),e}),s.length&&(t+="\n#### Feature Updated\n",s.map(function(e,a){return t=t+ ++a+". "+e+"\n",e})),i.length&&(t+="\n#### Compatible\n",i.map(function(e,a){return t=t+ ++a+". "+e+"\n",e})),r.length&&(t+="\n#### Bug Fixed\n",r.map(function(e,a){return t=t+ ++a+". "+e+"\n",e})),o.length&&(t+="\n#### Developer Issue\n",o.map(function(e,a){return t=t+ ++a+". "+e+"\n",e})),l.setState({value:t}),f()(".loading").hide()})}else P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),f()(".loading").hide()})},n.release=Object(c.a)(l.a.mark(function e(){var t,a,r,s,o,i,u,p,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.fire({title:"Are you sure?",text:"Do you really want to release?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Release!"});case 2:if(!e.sent.value){e.next=18;break}return f()(".loading").show(),t=f()("#mile_stones").children("option:selected").val(),a=f()("#mile_stones").children("option:selected").html(),r=f()("#mile_stones").children("option:selected").attr("milestoneId"),s=f()("#mile_stones").children("option:selected").html(),o="",i=Object(m.a)(n),u="",p="",n.repository.map(function(e,a){return t.includes(e.repos)&&s.includes("v"+e.release_branch)&&(o=e.projectId,u=e.release_branch,p=f()("#mile_stones").children("option:selected").html()),e}),e.next=16,D.getIssueFromMileStone(o,a);case 16:(d=e.sent).ok?d.json().then(function(){var e=Object(c.a)(l.a.mark(function e(t){var n,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.closeIssueList(t);case 2:n=D.closeMileStone(o,r),p=p.slice(p.indexOf("v"+u),p.length),c=D.release(o,p,u,s,i.state.value,[a]),Promise.all([n,c]).then(function(e){var t=e[1];t.ok?t.json().then(function(e){if(P.a.fire({title:"<strong>Released!</strong>",type:"success",html:"<b>Release "+e.name+": </b><a href='"+e._links.self+"'>"+e._links.self+"</a>",showCloseButton:!0}),f()(".loading").hide(),window.slackUrl){var t="*Release : *<"+e._links.self+"|"+e.name+">";fetch(window.slackUrl,{method:"POST",body:JSON.stringify({text:t})})}}):(P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),f()(".loading").hide())});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()):(P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),f()(".loading").hide());case 18:case"end":return e.stop()}},e)})),n.closeIssueList=function(){var e=Object(c.a)(l.a.mark(function e(t){var a,n,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(F.a)(t);try{for(n.s();!(r=n.n()).done;)s=r.value,a.push(D.closeIssue(s.project_id,s.iid))}catch(o){n.e(o)}finally{n.f()}return e.abrupt("return",Promise.all(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={mileStones:[],value:"",tab:"write",log:""},D.getSlackUrl(),n.repository=I.repository,n.repoUrl=I.repoUrl,n.converter=new j.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){if(v.a.get("authorize-github-base64")||v.a.get("token"))try{this.getList()}catch(e){alert(e)}}},{key:"render",value:function(){var e=this;if(v.a.get("authorize-github-base64")||v.a.get("token"))return n.createElement(n.Fragment,null,n.createElement("div",{className:"container",id:"select_mile_stones"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"mile_stones",className:"font-weight-bold"},"Milestones"),n.createElement("select",{className:"form-control",name:"mile_stones",id:"mile_stones",onChange:this.generateReleaseNotes},n.createElement("option",{value:"0"},"--- Please Select MileStones ---"),this.state.mileStones.map(function(e,t){return n.createElement("option",{key:e.id,milestoneid:e.id,value:e.web_url},e.title)})))),n.createElement("div",{className:"container"},n.createElement(E.a,{onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.state.value,generateMarkdownPreview:function(t){return Promise.resolve(e.converter.makeHtml(t))},selectedTab:this.state.tab})),n.createElement("br",null),n.createElement("div",{className:"container"},n.createElement("button",{className:"btn btn-primary",onClick:this.release},"RELEASE"),n.createElement("br",null),n.createElement("br",null)))}}]),a}(n.Component),V=a(32),G=a.n(V),J=(n.Component,function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).login=function(){var e=Object(c.a)(l.a.mark(function e(t){var a,r,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(m.a)(n),r=f()(".loading"),s=f()("#token"),t.preventDefault(),!s.val()){e.next=20;break}return o=s.val(),r.show(),e.prev=7,e.next=10,D.checkLoginToken(o);case 10:e.sent.ok?(v.a.set("token",o),a.setState({login:!0})):P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),P.a.fire({type:"error",title:"Oops...",text:"Something went wrong!"});case 17:r.hide(),e.next=21;break;case 20:P.a.fire({type:"error",title:"Oops...",text:"Please re-fill information!"});case 21:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t){return e.apply(this,arguments)}}(),n.logout=function(){var e=Object(c.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=Object(m.a)(n),e.prev=2,e.next=5,P.a.fire({title:"Are you sure?",text:"Do you really want to logout",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Log out!"});case 5:e.sent.value&&(v.a.remove("authorize-github-base64"),v.a.remove("token"),a.setState({login:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),v.a.get("authorize-github-base64")||v.a.get("token")?n.state={login:!0}:n.state={login:!1},n}return Object(p.a)(a,[{key:"render",value:function(){return this.state.login?n.createElement(y.a,null,n.createElement("div",{className:"loading"},"Loading\u2026"),n.createElement("nav",{className:"navbar navbar-expand navbar-light bg-light"},n.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},n.createElement("div",{className:"navbar-nav"},n.createElement(y.b,{className:"nav-item nav-link",to:"/issue"},"Create Issue"),n.createElement(y.b,{className:"nav-item nav-link",to:"/milestone/"},"Create Milestone"),n.createElement(y.b,{className:"nav-item nav-link",to:"/release/"},"Create Release"),n.createElement(y.b,{className:"nav-item nav-link",to:"#",onClick:this.logout},"Logout")))),n.createElement("div",{className:"container container-fluid"},n.createElement("aside",{className:"col-sm-12"},n.createElement(w.a,{exact:!0,path:"/",component:L}),n.createElement(w.a,{exact:!0,path:"/issue",component:L}),n.createElement(w.a,{exact:!0,path:"/milestone/",component:A}),n.createElement(w.a,{exact:!0,path:"/release/",component:U})))):n.createElement(y.a,null,n.createElement("div",{className:"loading"},"Loading\u2026"),n.createElement("div",{className:"container container-fluid"},n.createElement("aside",{className:"col-sm-8",id:"form_wrapper"},n.createElement("div",{className:"card"},n.createElement("article",{className:"card-body"},n.createElement("h4",{className:"card-title text-center mb-4 mt-1"},"Sign in"),n.createElement("hr",null),n.createElement("form",{id:"login_form"},n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group"},n.createElement("input",{id:"token",name:"token",className:"form-control",placeholder:"GitLab Token",type:"text"}))),n.createElement("div",{className:"form-group"},n.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:this.login}," Login"))))))))}}]),a}(n.Component)),q=document.getElementById("root");o.a.render(n.createElement(J,null),q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);